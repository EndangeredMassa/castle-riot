module.exports = class Painting
  constructor: ({x, y, @id}) ->
    @sprite = new Sprite image: 'img/painting1.png', x: x, y: y, scale: 1, anchor: 'top_left'
    @origX = x
    @origY = y
    @listeners = change: []

  on: (name, func) ->
    @listeners[name] ?= []
    @listeners[name].push func

  trigger: (name, args...) ->
    @listeners[name] ?= []
    func(args...) for func in @listeners[name]

  onTouchedByPlayer: (player) ->
    player.pickUpPainting @ unless @player

  pickedUp: (player) ->
    @player = player
    @trigger "pickedUp", player

  drop: ->
    player = @player
    @player = null
    @trigger "dropped", player

  rect: ->
    @sprite.rect()

  draw: ->
    @sprite.draw()

  move: (x, y) ->
    @sprite.moveTo x, y

  respawn: ->
    @trigger('respawned')
